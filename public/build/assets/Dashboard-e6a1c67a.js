import{r as s,j as a,a as t,b as j,g as c}from"./app-962258ed.js";import{A as O}from"./AuthenticatedLayout-df951a2e.js";import{P as d}from"./PrimaryButton-46612ca8.js";import"./ApplicationLogo-1b81e51b.js";import"./Dropdown-16e357c2.js";import"./transition-1212c4d3.js";function E({auth:l}){const[m,g]=s.useState(!1),[i,x]=s.useState([]),[p,v]=s.useState([]),[N,b]=s.useState(!1),[w,y]=s.useState([]);async function u(){const e=await c.get("/api/cart/"+l.user.id),r=e.data.products;v(e.data.totalPrice.toFixed(2)),g(r.length!=0),x(r)}async function h(e,r){e.preventDefault(),m==!0&&(await c.delete("/api/cart/"+l.user.id+"/"+r),u())}async function f(){const r=(await c.get("/api/orders/"+l.user.id)).data.orders;b(r.length!=0),y(r)}async function D(e){e.preventDefault(),Date.prototype.addDays=function(n){var o=new Date(this.valueOf());return o.setDate(o.getDate()+n),o};var r=new Date;const S=r.addDays(5).toISOString().split("T")[0]+" "+r.toISOString().split("T")[1].slice(0,8);c.post("/api/orders",{client_id:l.user.id,total_price:p,status:"Очікує підтвердження",arrival:S,products:JSON.stringify(i)}),i.map(n=>{h(e,n.product_id)}),f()}return s.useEffect(()=>{u(),f()},[]),a(O,{user:l.user,header:t("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Dashboard"}),children:[t(j,{title:"Dashboard"}),t("div",{className:"py-12",children:a("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[t("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:a("div",{className:"grid p-6 text-gray-900 dark:text-gray-100 w-full",children:[t("span",{className:"font-bold text-xl",children:"Корзина"}),t("div",{className:"flex gap-3 items-center p-3",children:m&&a("div",{className:"w-full flex flex-col-reverse justify-center",children:[t("div",{className:"flex gap-3 w-[calc(88vw)] max-w-6xl items-center overflow-x-scroll",children:i.reverse().map(e=>a("a",{href:route("product",e.product.slug),className:"grid p-3 items-center h-96 w-48 rounded-lg border border-gray-600 hover:bg-slate-600 transition-all duration-200",children:[e.product.photo_path?t("img",{src:"/"+JSON.parse(e.product.photo_path)[0],alt:"123.",class:"h-full w-full object-contain object-center rounded-lg lg:h-full lg:w-full"}):t("img",{src:"/img/gps.png",alt:"123.",class:"h-full w-full object-contain object-center lg:h-full lg:w-full"}),a("span",{className:"font-bold text-2xl",children:["$",e.product_price]}),t("span",{className:"mt-1 font-bold text-xl",children:e.product.name}),a("span",{className:"font-bold text-xl",children:["К-сть: ",e.product_count]}),t(d,{className:"mt-2 m-auto",onClick:r=>h(r,e.product_id),children:"Прибрати"})]},e.id))}),a("div",{className:"border border-gray-600 p-6 rounded-lg my-3 flex max-sm:flex-col justify-between items-center gap-6",children:[a("span",{className:"font-bold text-2xl",children:["Загальна ціна: ",p]}),t(d,{onClick:D,children:t("span",{className:"text-lg",children:"Замовити"})})]})]})||a("div",{className:"m-auto grid gap-3",children:[t("span",{children:"Схоже що наразі ваша корзина пуста :("}),t("a",{href:"/products",className:"m-auto",children:t(d,{children:"До товарів"})})]})})]})}),t("div",{className:"mt-6 bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:a("div",{className:"grid p-6 text-gray-900 dark:text-gray-100",children:[t("span",{className:"font-bold text-xl",children:"Замовлення"}),t("div",{className:"flex gap-3 items-center p-6",children:N&&t("div",{className:"flex gap-3 w-[calc(88vw)] max-w-6xl items-center overflow-x-scroll",children:w.sort((e,r)=>r.id-e.id).map(e=>a("div",{className:"grid p-3 items-center h-96 w-48 rounded-lg border border-gray-600",children:[a("span",{className:"font-bold text-2xl",children:["Ордер: №",e.id]}),a("span",{className:"font-bold text-xl",children:["$",e.total_price]}),a("span",{className:"font-bold text-xl",children:["Статус доставки:"," ",e.status]}),a("span",{className:"font-bold text-xl",children:["Прибуде: ",e.arrival]})]},e.id))})||a("div",{className:"m-auto grid gap-3",children:[t("span",{children:"Схоже що нічого не замовлено :("}),t("a",{href:"/products",className:"m-auto",children:t(d,{children:"До товарів"})})]})})]})})]})})]})}export{E as default};
