import{W as b,j as i,a as e,b as x}from"./app-407759a4.js";import{T as c,I as p}from"./TextInput-e492f2eb.js";import{I as l}from"./InputLabel-62725a5f.js";import{P as v}from"./PrimaryButton-b548c2f1.js";import{A as N}from"./AdminLayout-36f02b15.js";import{d as F}from"./index-f8ef7e0b.js";import{F as w}from"./FileInputDropdown-579497d6.js";import"./ApplicationLogo-2bd47d38.js";import"./iconify-9d0eba50.js";function J({auth:h,news:s}){const{data:o,setData:r,post:k,processing:g,errors:m,reset:C}=b({name:s.name,slug:s.slug,body:s.body,photo_path:s.photo_path?JSON.parse(s.photo_path):[]}),f=async a=>{a.preventDefault();const t=[],u=o.photo_path.map(async d=>{if(typeof d=="string")t.push(d);else try{const n=await y(d);t.push(n)}catch(n){console.error("Failed to upload file:",n)}});await Promise.all(u),F.Inertia.put(route("news.update",{news:s}),{name:o.name,slug:o.slug,body:o.body,photo_path:JSON.stringify(t)})},y=async a=>{try{const t=new FormData;return t.append("file",a),await(await axios.post("/api/upload-file",t,{headers:{"Content-Type":"multipart/form-data"}})).data.path}catch(t){throw console.error("File upload failed:",t),t}};return i(N,{user:h.user,header:e("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Оновлення новини"}),children:[e(x,{title:"Оновлення новини"}),e("div",{className:"py-12",children:e("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:i("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg p-4 text-gray-800 dark:text-gray-300",children:[e("span",{className:"text-xl font-semibold",children:"Оновити новину"}),i("form",{className:"px-4 py-8",onSubmit:f,children:[e(l,{htmlFor:"filedropdown",value:"Додати фото"}),e(w,{selectedFiles:o.photo_path,setSelectedFiles:a=>r("photo_path",a)}),e(l,{htmlFor:"name",value:"Назва"}),e(c,{id:"name",name:"name",value:o.name,className:"mt-1 block w-full",autoComplete:"name",isFocused:!0,onChange:a=>r("name",a.target.value),required:!0}),e(p,{message:m.name,className:"mt-2"}),e(l,{htmlFor:"slug",value:"Посилання"}),e(c,{id:"slug",name:"slug",value:o.slug,className:"mt-1 block w-full",autoComplete:"off",isFocused:!1,onChange:a=>r("slug",a.target.value),required:!0}),e(p,{message:m.slug,className:"mt-2"}),e(l,{htmlFor:"body",value:"Опис"}),e("textarea",{id:"body",name:"body",value:o.body,className:"mt-1 block w-full h-96 rounded-lg bg-gray-200 dark:bg-gray-900",autoComplete:"off",onChange:a=>r("body",a.target.value),required:!0}),e(p,{message:m.body,className:"mt-2"}),e(v,{className:"mt-16 w-full grid",disabled:g,children:e("span",{className:"text-[1rem]",children:"Оновити"})})]})]})})})]})}export{J as default};
