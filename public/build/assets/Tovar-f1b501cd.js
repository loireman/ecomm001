import{r as p,j as r,a as e,b as v,g as x}from"./app-8c8b3c63.js";import{I as k}from"./InputLabel-ee4ca893.js";import{P as S}from"./PrimaryButton-3e9092ad.js";import{A as j}from"./AuthenticatedLayout-b357f8c2.js";import{I as b}from"./iconify-e8abf1ea.js";import"./index-07542236.js";import"./ApplicationLogo-d0bb5056.js";import"./Dropdown-2f932e3a.js";import"./transition-74771fda.js";const P=({photos:n})=>{const[t,o]=p.useState(0),u=d=>{o(d)};return r("div",{children:[e("img",{src:"/"+n[t],className:"h-full w-full aspect-square md:h-96 object-contain object-center",alt:`Photo ${t+1}`}),e("div",{className:"flex mt-4",children:n.map((d,i)=>e("img",{src:"/"+d,className:`h-12 w-12 object-cover mr-2 cursor-pointer border ${i===t?"border-blue-500":"border-gray-200"}`,alt:`Photo ${i+1}`,onClick:()=>u(i)},i))})]})},_=P;function J({auth:n,tovar:t}){const[o,u]=p.useState(!1),[d,i]=p.useState(1),[m,y]=p.useState(t.price);async function h(){const a=(await x.get("/api/cart/"+n.user.id).then(c=>c.data.products)).filter(c=>c.product_id==t.id);u(a.length!=0),a.length!=0&&(i(a[0].product_count),y((a[0].product_count*t.price).toFixed(2)))}p.useEffect(()=>{h()},[]);async function N(s){s.preventDefault(),Date.prototype.addDays=function(l){var f=new Date(this.valueOf());return f.setDate(f.getDate()+l),f};var a=new Date;const c=a.addDays(5).toISOString().split("T")[0]+" "+a.toISOString().split("T")[1].slice(0,8),w={client_id:n.user.id,total_price:m,status:"Очікує підтвердження",arrival:c,products:JSON.stringify([{product_id:t.id,product_count:d,product_price:m}])};fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)}).then(l=>l.json()).then(()=>{window.location.replace(route("dashboard"))}).catch(l=>console.log(l))}async function g(s,a){if(s.preventDefault(),o==!0&&(await x({method:"DELETE",url:"/api/cart/"+n.user.id+"/"+t.id}),h()),a==0&&o==!1)await x({method:"POST",url:"/api/cart",data:{client_id:n.user.id,product_id:t.id,product_count:d,product_price:m}}),h();else if(a>0){const c=a==1?d-1:d+1;c>=1&&c<=t.property2&&(i(c),y((c*t.price).toFixed(2)))}}return r(j,{user:n.user,header:e("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Інформація про товар"}),children:[e(v,{title:"Інформація про товар"}),r("div",{className:"py-12 grid gap-6 xl:flex xl:gap-0",children:[e("div",{className:"xl:max-w-3xl w-full sm:px-9s lg:px-8",children:e("div",{className:"flex max-md:flex-col-reverse justify-between bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg text-gray-900 dark:text-gray-100",children:r("div",{className:"p-6 w-full",children:[e("div",{className:"p-6 font-bold text-2xl",children:t.name}),r("div",{className:"mt-3 ml-5 text-xl font-medium",children:["Ціна: $",t.price]}),r("div",{className:"ml-5 text-xl font-medium hidden",children:["Тип: ",t.property1]}),r("div",{className:"ml-5 text-xl font-medium",children:["Кількість: ",t.property2]}),r("div",{className:"grid gap-3 mt-5 ml-5",children:[e(k,{className:"text-xl",for:"productCount",value:"Замовити:"}),r("div",{className:"flex gap-3 items-center",children:[e("span",{className:"font-bold text-2xl",children:d}),e("button",{onClick:s=>g(s,1),className:`grid content-center justify-center aspect-square px-2 h-full
                                        rounded-md text-gray-200 border bg-gray-600 dark:bg-gray-700
                                        hover:bg-gray-500 dark:hover:bg-gray-600 border-gray-600`,children:e("span",{className:"text-base",children:e(b,{icon:"mdi:minus",height:24,width:24})})}),e("button",{onClick:s=>g(s,2),className:`grid content-center justify-center aspect-square px-2 h-full
                                        rounded-md text-gray-200 border bg-gray-600 dark:bg-gray-700
                                        hover:bg-gray-500 dark:hover:bg-gray-600 border-gray-600`,children:e("span",{className:"text-base",children:e(b,{icon:"mdi:plus",height:24,width:24})})})]}),r("span",{className:"font-bold text-2xl",children:["Остаточна ціна: ",m]}),r("div",{className:"flex items-stretch gap-3",children:[e(S,{onClick:N,children:e("span",{className:"text-[0.9rem]",children:"Замовити зараз"})}),e("button",{onClick:s=>g(s,0),className:"grid content-center justify-center aspect-square px-2 mx-2 h-full rounded-md text-gray-200 border"+(o===!0?"bg-green-600 dark:bg-green-700 hover:bg-green-500 dark:hover:bg-green-600 border-green-600":"bg-orange-600 dark:bg-orange-700 hover:bg-orange-500 dark:hover:bg-orange-600 border-orange-600"),children:e("span",{className:"text-base xl:p-2",children:e(b,{icon:o===!0?"mdi:done":"mdi:cart",height:24,width:24})})})]})]})]})})}),e("div",{className:"xl:max-w-6xl w-full sm:px-9s lg:px-8",children:e("div",{className:"flex max-md:flex-col-reverse justify-between bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg text-gray-900 dark:text-gray-100",children:r("div",{className:"p-6 w-full",children:[t.photo_path?e(_,{photos:JSON.parse(t.photo_path)}):e("img",{src:"/img/gps.png",alt:"123.",class:"h-full w-full aspect-square md:h-96 object-contain object-center lg:h-[36rem]"}),e("span",{className:"font-semibold text-lg",children:"Опис"}),e("br",{}),e("span",{className:"whitespace-pre-wrap",children:t.body})]})})})]})]})}export{J as default};
