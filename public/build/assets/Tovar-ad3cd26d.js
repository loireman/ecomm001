import{r as l,j as i,a as e,b as v,c as u}from"./app-dfe72b66.js";import{I as w}from"./InputLabel-951b31bd.js";import{P as k}from"./PrimaryButton-f925f0dd.js";import{A as D}from"./AuthenticatedLayout-4085b8eb.js";import{I as h}from"./iconify-557c12cc.js";import"./index-0c658c0c.js";import"./ApplicationLogo-3f29ed91.js";import"./Dropdown-62888e04.js";import"./transition-bf29ed65.js";function q({auth:s,tovar:t}){const[n,b]=l.useState(!1),[d,f]=l.useState(1),[o,x]=l.useState(t.price);async function m(){const r=(await u.get("/api/cart/"+s.user.id).then(c=>c.data.products)).filter(c=>c.product_id==t.id);b(r.length!=0),r.length!=0&&(f(r[0].product_count),x((r[0].product_count*t.price).toFixed(2)))}l.useEffect(()=>{m()},[]);async function y(a){a.preventDefault(),Date.prototype.addDays=function(N){var g=new Date(this.valueOf());return g.setDate(g.getDate()+N),g};var r=new Date;const c=r.addDays(5).toISOString().split("T")[0]+" "+r.toISOString().split("T")[1].slice(0,8);await u.post("/api/orders/",{client_id:s.user.id,total_price:o,status:"Очікує підтвердження",arrival:c,products:JSON.stringify([{product_id:t.id,product_count:d,product_price:o}])}),window.location.replace(route("dashboard"))}async function p(a,r){if(a.preventDefault(),n==!0&&(await u({method:"DELETE",url:"/api/cart/"+s.user.id+"/"+t.id}),m()),r==0&&n==!1)await u({method:"POST",url:"/api/cart/",data:{client_id:s.user.id,product_id:t.id,product_count:d,product_price:o}}),m();else if(r>0){const c=r==1?d-1:d+1;f(c),x((c*t.price).toFixed(2))}}return i(D,{user:s.user,header:e("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Інформація про товар"}),children:[e(v,{title:"Інформація про товар"}),e("div",{className:"py-12",children:e("div",{className:"max-w-5xl sm:px-9s lg:px-8",children:i("div",{className:"flex max-md:flex-col-reverse justify-between bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg text-gray-900 dark:text-gray-100",children:[i("div",{className:"p-6",children:[e("div",{className:"p-6 font-bold text-2xl",children:t.name}),i("div",{className:"mt-3 ml-5 text-xl font-medium",children:["Ціна: $",t.price]}),i("div",{className:"ml-5 text-xl font-medium",children:["Тип: ",t.property1]}),i("div",{className:"ml-5 text-xl font-medium",children:["Кількість: ",t.property2]}),i("div",{className:"grid gap-3 mt-5 ml-5",children:[e(w,{className:"text-xl",for:"productCount",value:"Замовити:"}),i("div",{className:"flex gap-3 items-center",children:[e("span",{className:"font-bold text-2xl",children:d}),e("button",{onClick:a=>p(a,1),className:`grid content-center justify-center aspect-square px-2 h-full
                                        rounded-md text-gray-200 border bg-gray-600 dark:bg-gray-700
                                        hover:bg-gray-500 dark:hover:bg-gray-600 border-gray-600`,children:e("span",{className:"text-base",children:e(h,{icon:"mdi:minus",height:24,width:24})})}),e("button",{onClick:a=>p(a,2),className:`grid content-center justify-center aspect-square px-2 h-full
                                        rounded-md text-gray-200 border bg-gray-600 dark:bg-gray-700
                                        hover:bg-gray-500 dark:hover:bg-gray-600 border-gray-600`,children:e("span",{className:"text-base",children:e(h,{icon:"mdi:plus",height:24,width:24})})})]}),i("span",{className:"font-bold text-2xl",children:["Остаточна ціна: ",o]}),i("div",{className:"flex items-stretch gap-3",children:[e(k,{onClick:y,children:e("span",{className:"text-[0.9rem]",children:"Замовити зараз"})}),e("button",{onClick:a=>p(a,0),className:"grid content-center justify-center aspect-square px-2 h-full rounded-md text-gray-200 border "+(n===!0?"bg-green-600 dark:bg-green-700 hover:bg-green-500 dark:hover:bg-green-600 border-green-600":"bg-orange-600 dark:bg-orange-700 hover:bg-orange-500 dark:hover:bg-orange-600 border-orange-600"),children:e("span",{className:"text-base",children:e(h,{icon:n===!0?"mdi:done":"mdi:cart",height:24,width:24})})})]})]})]}),e("img",{src:"https://tailwindui.com/img/ecommerce-images/product-page-01-related-product-01.jpg",alt:"Front of men's Basic Tee in black.",class:"h=full aspect-square md:h-96 object-cover object-center lg:h-[36rem]"})]})})})]})}export{q as default};
