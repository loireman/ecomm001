import{W as b,j as i,a as e,b as N}from"./app-257100f3.js";import{T as u,I as m}from"./TextInput-365a0fc2.js";import{I as l}from"./InputLabel-6975009a.js";import{P as x}from"./PrimaryButton-22e4a169.js";import{A as F}from"./AdminLayout-0cb56115.js";import{d as v}from"./index-2f91a7ee.js";import{F as w}from"./FileInputDropdown-9505e909.js";import"./ApplicationLogo-cec0d6d3.js";import"./iconify-159c448f.js";function J({auth:y,tovaries:r}){const{data:t,setData:s,post:C,processing:h,errors:p,reset:k}=b({name:r.name,price:r.price,slug:r.slug,property1:r.property1,property2:r.property2,body:r.body,photo_path:r.photo_path?JSON.parse(r.photo_path):[]}),g=async a=>{a.preventDefault();const o=[],c=t.photo_path.map(async n=>{if(typeof n=="string")o.push(n);else try{const d=await f(n);o.push(d)}catch(d){console.error("Failed to upload file:",d)}});await Promise.all(c),v.Inertia.put(route("tovary.update",{tovary:r}),{name:t.name,price:t.price,slug:t.slug,property1:t.property1,property2:t.property2,body:t.body,photo_path:JSON.stringify(o)})},f=async a=>{try{const o=new FormData;return o.append("file",a),await(await axios.post("/api/upload-file",o,{headers:{"Content-Type":"multipart/form-data"}})).data.path}catch(o){throw console.error("File upload failed:",o),o}};return i(F,{user:y.user,header:e("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Оновлення товару"}),children:[e(N,{title:"Створення товару"}),e("div",{className:"py-12",children:e("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:i("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg p-4 text-gray-800 dark:text-gray-300",children:[e("span",{className:"text-xl font-semibold",children:"Оновити товар"}),i("form",{className:"px-4 py-8",onSubmit:g,children:[e(l,{htmlFor:"filedropdown",value:"Додати фото"}),e(w,{selectedFiles:t.photo_path,setSelectedFiles:a=>s("photo_path",a)}),e(l,{htmlFor:"name",value:"Назва"}),e(u,{id:"name",name:"name",value:t.name,className:"mt-1 block w-full",autoComplete:"name",isFocused:!0,onChange:a=>s("name",a.target.value),required:!0}),e(m,{message:p.name,className:"mt-2"}),e(l,{htmlFor:"slug",value:"Посилання"}),e(u,{id:"slug",name:"slug",value:t.slug,className:"mt-1 block w-full",autoComplete:"off",isFocused:!1,onChange:a=>s("slug",a.target.value),required:!0}),e(m,{message:p.slug,className:"mt-2"}),e(l,{htmlFor:"price",value:"Ціна"}),e(u,{id:"price",name:"price",type:"number",step:"any",value:t.price,className:"mt-1 block w-full",autoComplete:"off",isFocused:!1,onChange:a=>s("price",a.target.value),required:!0}),e(m,{message:p.price,className:"mt-2"}),e(l,{htmlFor:"property1",value:"Властивість 1"}),e(u,{id:"property1",name:"property1",type:"number",value:t.property1,className:"mt-1 block w-full",autoComplete:"off",isFocused:!1,onChange:a=>s("property1",a.target.value),required:!0}),e(m,{message:p.property1,className:"mt-2"}),e(l,{htmlFor:"property2",value:"Властивість 2"}),e(u,{id:"property2",name:"property2",type:"number",value:t.property2,className:"mt-1 block w-full",autoComplete:"off",isFocused:!1,onChange:a=>s("property2",a.target.value),required:!0}),e(m,{message:p.property2,className:"mt-2"}),e(l,{htmlFor:"body",value:"Опис"}),e("textarea",{id:"body",name:"body",value:t.body,className:"mt-1 block w-full h-32 rounded-lg bg-gray-200 dark:bg-gray-900",autoComplete:"off",onChange:a=>s("body",a.target.value),required:!0}),e(m,{message:p.body,className:"mt-2"}),e(x,{className:"mt-16 w-full grid",disabled:h,children:e("span",{className:"text-[1rem]",children:"Оновити"})})]})]})})})]})}export{J as default};
